---

copyright:

  years: 2018
lastupdated: "2018-11-30"

---

{:shortdesc: .shortdesc}
{:codeblock: .codeblock}
{:screen: .screen}
{:new_window: target="_blank"}
{:tip: .tip}
{:note: .note}

# 需要对您帐户中的用户进行 MFA
{: #enablemfa}

作为 {{site.data.keyword.Bluemix}} 帐户所有者，您可以为帐户中的每个用户选择需要多因子认证 (MFA)。使用 IBM 标识的所有用户都使用基于时间的一次性验证码 (TOTP) MFA 方法，并且必须支持使用其他类型标识的任何用户使用 TOTP、安全问题或单独的外部认证方法。  
{:shortdesc}

## 开始之前
{: #considerations}

在对帐户启用 IBM 标识 MFA 之前，请查看以下注意事项，以确保您知道这会如何影响帐户中的所有用户：

* 对帐户启用 MFA 后，您帐户中添加的所有用户都必须在下次登录时完成 MFA 过程。
* 启用 MFA 后，用户和服务标识的 API 密钥将继续有效。
* 如果要求使用本机 CF CLI 或 UI 登录到 Cloud Foundry，那么在对帐户启用 MFA 后，必须使用 API 密钥或单点登录 (SSO)。
* 对帐户的 MFA 会应用于用户的登录，但不会应用于 API 调用。如果用户有权对帐户中的资源发出 API 调用，那么用户可以在不完成 MFA 的情况下执行此操作。如果用户属于其他帐户，那么该用户可以使用不需要 MFA 的帐户中的 API 密钥，对您帐户中的资源发出 API 调用。
* 如果您是联合用户，那么不支持 MFA。
* 如果您的帐户需要 MFA，但您帐户中有用户没有 IBM 标识，那么必须在 {{site.data.keyword.Bluemix_notm}} 控制台的“用户详细信息”页面中，为该用户启用其他某个 MFA 选项。有关更多信息，请参阅[多因子认证的类型](/docs/iam/mfatypes.html#types)。
* 为您帐户中的用户规划一个沟通与支持策略：
  * 选择一个对业务影响最小的日期和时间来启用 MFA。
  * 启用 MFA 后，告诉您的帐户用户要如何进行相关[设置](mfa.html#setupapp)。

启用多因子认证帐户设置后，帐户中的所有 IBM 标识用户在登录时会收到进行 IBM 标识 MFA 认证的提示。如果您为帐户中的任何 IBM 标识用户设置了其他 MFA 方法，那么系统不会再提示他们输入这些 MFA 方法。
{: tip}

## 为帐户中的所有用户启用 MFA
{: #enabling}

要启用 MFA，您必须是帐户所有者。启用 MFA 不会影响已登录的用户，因为对帐户强制执行 MFA 仅对新登录生效。确保通知帐户用户已启用 MFA，并向用户说明对其下次登录的影响。

1. 在菜单栏中，单击**管理** &gt; **访问权 (IAM)**，然后选择**设置**。
2. 选择**多因子认证**。
3. 在确认窗口中，单击**是，我确定**。

## 设置 TOTP
{: #setupapp}

对帐户启用 MFA 后，在下次登录时，必须为认证程序应用程序设置一次性密码。您帐户中的所有用户也必须在下一次登录时设置一次性密码。

第一次为认证程序应用程序设置一次性密码时，请完成以下步骤：

1. 使用 IBM 标识和密码登录。

  可能需要 5 分钟之后，您才能使用 MFA 重新登录。
  {: note}

2. 在**需要验证**屏幕上选择**验证**，为认证程序应用程序设置 MFA。
3. 选择**设置认证程序应用程序**，此时您会收到通过电子邮件发送的一次性代码，请使用它来继续设置认证程序应用程序。
4. 选择**验证**。
5. 扫描您应用程序的条形码，或者单击**无法扫描条形码？**以输入提供的密钥。
6. 单击**继续**以输入代码。
7. 输入代码后，选择**验证**。

如果有错误消息指出，您已经设置认证，但验证码不起作用，或者您没有要输入的验证码，那么必须联系[帮助台 ](https://www.ibm.com/ibmid/myibm/help/us/helpdesk.html){: new_window}![外部链接图标](../icons/launch-glyph.svg "外部链接图标") 以重置 MFA 注册。
{: note}
{: #mfahelp}

## 对帐户中的所有用户禁用必需的 MFA
{: #disablemfa}

要禁用 MFA，您必须是帐户所有者。禁用 MFA 不会影响已登录的用户。该操作将对所有新登录生效。

1. 在菜单栏中，单击**管理** &gt; **访问权 (IAM)**，然后选择**设置**。
2. 选择**标准**。
3. 在确认窗口中，单击**是，我确定**。
